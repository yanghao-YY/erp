<!doctype html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>小咸鱼管理系统</title>
<link rel="stylesheet" type="text/css" href="assets/css/login.css">
<link href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
<script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
</head>
<body>
<div class="htmleaf-container">
	<div class="wrapper">
		<div class="container">
			<h1>Welcome to SaltyFish</h1>
			
			<form class="form" method="post">
				<input type="text" name="username" id="username" placeholder="请输入用户名">
				<input type="password" name="password" id="password" placeholder="请输入密码">
				<button type="submit" id="login-button">登录</button>
			</form>
		</div>
		
		<ul class="bg-bubbles">
			<li></li>
			<li></li>
			<li></li>
			<li></li>
			<li></li>
			<li></li>
			<li></li>
			<li></li>
			<li></li>
			<li></li>
		</ul>
	</div>
</div>

<div class="modal fade" id="loadingModal" backdrop="static" keyboard="false">
	　　<div style="width: 200px;height:20px; z-index: 20000; position: absolute; text-align: center; left: 50%; top: 50%;margin-left:-100px;margin-top:-10px">
	　　　　<div class="alert alert-success">登录中...</div>
	　　　　
	　　</div>
</div>
<script>
$('#login-button').click(function (event) {
	event.preventDefault();
	// $('form').fadeOut(500);
	// $('.wrapper').addClass('form-success');
});
$("#login-button").on('click',function () {
    showload();
    var username = $("#username").val();
    var password = $("#password").val();
	var params = {"username": username, "password": password};
    $.ajax({
        url: "/login",
        type: "post",
        data: params,
        dataType: "json",
        success: function (data) {
           if(data.code == "0001") {
               hideload();
               swal(
                   'error!',
                   '密码错误！',
                   'error'
               )

           };
            if(data.code == "0000") {
                hideload();
                window.location.href = 'index.html';

            }



        },error:function () {
            hideload();
            swal(
                'error!',
                '系统异常，请联系管理员',
                'error'
            )
        }
    });

});
//显示遮罩
function showload() {
    console.info("调用了");
    $('#loadingModal').modal({backdrop: 'static', keyboard: false});

};
//关闭遮罩
function hideload() {
    $('#loadingModal').modal('hide');

};
</script>

</body>
</html>